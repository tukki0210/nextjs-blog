---
title: '【JS忍者】関数のメモ化について２'
date: '2021-04-25'
image: '/images/2021年/4月/JSNinja.jpg'
---


[JavaScript Ninjaの極意](https://www.amazon.co.jp/dp/B00ESXY9MA/ref=cm_sw_em_r_mt_dp_HRZDY2NZ5YNFZBDMZ89X)

続き

オブジェクト指向にあるプライベート変数とかオーバーライドとかカプセル化をクロージャを使って実現しようとしているらしい。
JavaScriptって引数に型の宣言がないことに読みにくさを感じてることに最近気が付きました。TypeSctiptはその辺配慮されてる気がする。



## コストの高い関数をメモ化する

P.119
4.5.1 メモ化　より

素数を判定するプログラムに過去に計算した内容を覚えさせる（キャッシュ）の機能を追加する。
##
```javascript

Function.prototype.memorized = function(key){
    this._values = this._values || {};
    return this._value[key] !== undefined ?
        this._value[key] :
        this._value[key] = this.apply(this,arguments);
}

```
関数にメモを追加して以前の計算結果をキャッシュすることができる。
これさえ定義しておけば他に特別な動作や初期化を必要としない。

これはDOM要素に対しても応用できる

```javascript

// 略

function getElements(name){
    if (!getElements.cache) getElements.cache = {};
    return getElements.cache[name] = 
        getElements.cache[name] ||
        documents.getElementsByTagName(name);
}
```

