---
title: '【HandsOnJS】気象庁のAPIから天気予報データを取得する'
date: '2021-06-16'
image: '/images/2021年/5月/HandsOnJS.jpg'
---

## とりあえず作成 解説は後日

参考：[気象庁の天気予報JSONファイルをWebAPI的に利用したサンプルアプリ](https://anko.education/apps/weather_api)


上記のサイトの内容を<code>async/awiat</code> を用いて書き直すと下記の通り。


```javascript

<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="test"></div>
</body>
</script>
<script>
    // API配信のURL
    let url_Tokyo = "https://www.jma.go.jp/bosai/forecast/data/overview_forecast/130000.json"

    const getWeather = async (url) => {

        // 指定したurlのAPIからjsonデータを取得
        const response = await fetch(url)
        // jsonデータをオブジェクトに変換する
        const data = await response.json()
        // JSONデータのフォーマット
        // publishingOffice	データ配信元。基本的に「気象庁」と入っている。
        // reportDatetime	報告日時。「+09:00」という部分はタイムゾーン
        // targetArea	対象の地域。130000.jsonは基本的に「東京都」。13が東京なのは、都道府県コードがそうなっているから。
        // headlineText	ヘッドラインです
        // text	詳細な概要情報です。改行は「\n\n」なので、ブラウザなどに表示するときはbrタグに変更する必要がある。
        const text = data.text

        document.getElementById("test").textContent = text
    }
    
    // 関数の実行
    getWeather(url_Tokyo)
</script>

</html>
```

## 非同期処理について

### Promise

### async/await